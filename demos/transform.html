<!DOCTYPE html>
<html >
<head>
  <meta charset="UTF-8">
  <title>Canvallax: Transform</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="demos.css">

  <style type="text/css">
  /* Custom Styles for test */

  </style>
</head>
<body>

<script src='http://cdnjs.cloudflare.com/ajax/libs/gsap/1.18.0/TweenMax.min.js'></script>
<script src='../dist/canvallax.js'></script>
<script>
/* Test Code */

var tracker = canvallax.TrackPointer({
      ease: 2,
      scale: 1,
      //invert: true
    }),
    scene = canvallax.Scene({
      tracker: tracker,
      fullscreen: true
    }),
    width = document.body.clientWidth,
    height = document.body.clientHeight;

// Uses canvallax, available on Github
// https://github.com/shshaw/canvallax.js

var width = document.body.clientWidth,
    height = document.body.clientHeight,

    allTransforms = ["center center", [0,0], [100,100], "center top", "right top", "left center", "right center", "left bottom", "center bottom", "right bottom"],
    count = allTransforms.length,

    color = '#D25063',

    els = [
      canvallax.Rectangle({
        width: 100,
        height: 100,
        x: 100,
        y: 300,
        opacity: 0.5,
        outline: '#F00',
        fill: color,
      }),

      canvallax.Ellipse({
        radius: 50,
        x: 300,
        y: 300,
        opacity: 0.5,
        outline: '#F00',
        fill: color
      }),


      canvallax.Polygon({
        width: 100,
        height: 100,
        points: 3,
        x: 500,
        y: 300,
        z: 0.9,
        rotation: 0,
        opacity: 0.5,
        outline: '#F00',
        fill: color
      }),
    ];


function each(obj,callback) {
  var length = obj.length,
      i = 0;

  for ( ; i < length; i++ ) {
    if ( callback.call( obj[ i ], i, obj[ i ] ) === false ) { break; }
  }
}

each(els,function(i){

/*
    if ( i == 0 ) {
      this.tracker = canvallax.TrackPointer();
    }
*//*
 else {
      this.fixed = true;
    }
*/
  var clone = this.clone({
      opacity: 1,
      zIndex: 9,
    }),
    j = 0;



  function animate(){
    if ( j >= count ) { j = 0; }
    clone.transformOrigin = allTransforms[j];
    j++;

    clone.rotation = 45;

    console.log(clone.transformOrigin,clone._transformPoint);

/*
    TweenMax.to(clone,2,{
      rotation: 360,
      scale: 1.5,
      ease: 'Cubic.easeInOut',
      yoyo: true,
      repeat: 1,
      delay: 0.5,
      onComplete: animate
    });
*/
  }

  scene.add(this,clone);
  animate();

});



</script>
</body>
</html>
